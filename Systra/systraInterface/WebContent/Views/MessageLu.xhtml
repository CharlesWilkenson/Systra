<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
	<ui:composition template="/Views/dashboards.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">
	<ui:define name="contentdashboard2">
	<h:head>

<script type="text/javascript" src="../validation/jquery-3.2.1.min.js"></script>
	 <link rel="icon" type="image/png" href="../logo/logosys.png" />
 	 <link rel="stylesheet" type="text/css" href="../resources/css/carousel.css" />
 <link rel="stylesheet" type="text/css" href="../resources/css/styletext.css" />

	  <script type="text/javascript" src="../scscrollbar.js"></script>
<!-- <link rel="stylesheet" href="../scrollbar/scrollbar2.css"/> -->


	 <style>

#image{
    background-image: url("../logo/Mail.png");
    width: 702px;
    height:36px;
    background-repeat: no-repeat;
     margin-top:-50px;
}


.scrollbar2
{/* padding: 0px 10px 0px 4px !important; */
height: 400px;
width:123%;
	margin-left: -45px;
	float: left;
	background: #F5F5F5;
	overflow-y: auto;
background-color: white;
}

.force-overflow2
{
	text-align:left;
	width:599px;
	max-height: 400px;
	
	border-radius:10px;
}

#wrapper2
{
	text-align: center;
	width: 500px;
	margin: auto;
}



/*
 *  STYLE 11
 */

#style-112::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	background-color: #F5F5F5;
	border-radius: 10px;
}

#style-112::-webkit-scrollbar
{
	width: 15px;
	background-color: #F5F5F5;
}

#style-112::-webkit-scrollbar-thumb
{
	background-color: #AAA;
	border-radius: 10px;
	background-image: -webkit-linear-gradient(90deg,
	                                          rgba(0, 0, 0, .2) 25%,
											  transparent 25%,
											  transparent 50%,
											  rgba(0, 0, 0, .2) 50%,
											  rgba(0, 0, 0, .2) 75%,
											  transparent 75%,
											  transparent)
}


</style>
	</h:head>
 
	<b:messages id="messages" style="width:80%;margin:auto"
            globalOnly="true"
            severity="error,fatal,info,warn"/>
<b:growl id="growl" 
         globalOnly="true"
         showDetail="true"
         severity="info,warn"/>
<h:body >

   <h3><h:outputText rendered="#{messageMB.lister().size()==1}"  value="Message lu" />
   <h:outputText rendered="#{messageMB.lister().size()>1}"  value="Messages lus" />
	     <h:outputText rendered="#{messageMB.lister().size()==0}"  value="Pas de message lu" /></h3>
	     
	     
	      <b:panel style="margin:auto;width:65%;border-radius:10px;margin-top:1px" class="table">
	      <b:form id="formmsg">   

<div id="wrapper2">
  <div class="scrollbar2" id="style-112">
  <div class="force-overflow2">
<h:dataTable class="table" value="#{messageMB.lister()}" var="msg" bodyrows="3" >
   <h:outputText rendered="#{messageMB.lister().size()>1}"  value="#{messageMB.lister().size()} messages lus" />

<h:column >
<h:outputFormat >
<f:param name="idmsg" value="#{msg.value.id}"></f:param> 

 <b:image  height='40' width='50' 
  value="../logo/images (6).jpg" name=""></b:image>
  
<h:outputText value="#{msg.value.nomComplet} envoyÃ© le #{msg.value.date}" 
style="font-size:15px;color:#AAAAAA;padding: 0.5em;postion:relative; z-index: -1;"></h:outputText>
</h:outputFormat>
</h:column>

 <h:column >

            <b:commandLink rendered="#{request.isUserInRole('ADMIN')}"  style="padding:right: 4.8em;postion:relative; z-index:1;" oncomplete="$('.msg').modal();return false;">
    	<b:iconAwesome name="fa-search" style="border-radius:3px;" size="2x"></b:iconAwesome>             
    		<f:param name="idmsg" value="#{msg.key}"></f:param> 
    		<f:ajax   render="formModal" listener="#{messageMB.readMessageRead()}"></f:ajax>
          </b:commandLink>
          
          
          <b:commandLink rendered="#{request.isUserInRole('ADMIN')}" update="formmsg" style="margin-left:20px;cursor:pointer">
<b:iconAwesome name="fa-trash" style="border-radius:3px;" size="2x"></b:iconAwesome>    
	<f:param name="idmsg" value="#{msg.key}"></f:param> 
		<f:ajax   render="formmsg" listener="#{messageMB.delete()}"></f:ajax>          
</b:commandLink>
</h:column> 
</h:dataTable>

</div></div></div>
</b:form>
	     </b:panel>

	
		
 <b:form id="formModal" horizontal="true">
  <b:modal class="image"  title="Message" backdrop="false" styleClass="msg" size="modal-md">

 	   
 
   	 	<b:panel >
	    <f:facet name="heading">  
      <b:badge style="margin-left:10px; background-color:#5cb85c" >
    <span> <b:image  height='30' width='50'  value="../logo/message2.png" name="">

  </b:image> 
 
</span>
      </b:badge>
      	 
   	</f:facet>

<b:panelGrid columns="2">
 <h:outputFormat value="Nom Complet :" style="font-family: 'Patua One', cursive;"/>
 <h:outputFormat value="#{messageMB.nomComplet}" style="font-family: 'Patua One', cursive;margin-left:-185px"/>
 <h:outputFormat value="Destinateur :" style="font-family: 'Patua One', cursive;"/>
<h:outputFormat value="#{messageMB.mail}" style="font-family: 'Patua One', cursive;margin-left:-193px"/>
</b:panelGrid>
<b:inputTextarea   value="#{messageMB.message}" rows="18" col-md="30"/>
 	 				</b:panel>
   	 	
   	 				 </b:modal> 
	 </b:form>	
		 

		</h:body>	
	</ui:define>
</ui:composition>