<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
	<ui:composition template="/Views/dashboards.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">
	<ui:define name="contentdashboard2">	
<h:head>
<title>
Lots
</title>
	 <link rel="icon" type="image/png" href="../images/logosys.png" />
	 <link href='http://fonts.googleapis.com/css?family=Patua+One' rel='stylesheet' type='text/css'/>
 	 <link rel="stylesheet" type="text/css" href="../resources/css/carousel.css" />
<style type="text/css">
	h3 {
	color:gray;
    font-family: 'Patua One';
	text-align: center;
	font-size: 30px;
	margin: auto;
	width:30%;
	text-align:center;	
	 margin-top:-10px;

}

label.error,
.required {
    font-size: 14px;
    color: red;
}
.form-controls {
    clear: both;
}
	.my-error-class {
    color:#FF0000;  /* red */
}
.my-valid-class {
    color:#00CC00; /* green */
}	
</style>
	</h:head>
	


      <b:messages id="messages" style="width:50%;margin:auto"
            globalOnly="true"
            severity="error,fatal,info,warn"/>
   <h:body>         
            <h3>Nouveaux lots</h3>
            
<h:outputFormat value="#{lotsMB.idregion}" />
   	
   	<b:form horizontal="true" id="info">
   	 <b:formGroup> 
	<b:panel title="Verification du fournisseur" look="primary" rendered="#{lotsMB.renderfourn}" style="width:50%;margin:auto">

   	 <!-- 	<f:facet name="heading">
     <i style="padding-right:20px" /><h:outputText value="Verification du fournisseur" />
  <b:badge style="margin-left:20px; background-color:#5cb85c" value="No Lot: #{lotsMB.idlot}" rendered="#{lotsMB.renderachat}"/>
  </f:facet>
  -->
   	  <b:column >
   	  <b:inputText required="true" value="#{lotsMB.idfournisseur}" placeholder="Entrer le code du fournisseur" style="padding-right:50px;"  colMd="10" labelColMd="2" >
   		 <f:facet name="append">
            <b:commandButton look="primary"  update="info,messages,info2,info3,info4"  iconAwesome="check" icon-align="right">
              <f:ajax execute="@form" listener="#{lotsMB.verifierfourn()}" ></f:ajax>
          
            </b:commandButton> 
        </f:facet>
        </b:inputText>
	    </b:column >
	    </b:panel>
	    </b:formGroup>
	    </b:form>
	     
	     
	     <b:form horizontal="true" id="info2">
	   <b:panel  look="primary" rendered="#{lotsMB.renderlot}" style="margin-left:190px;margin-right:140px;">	
	<f:facet name="heading">
     <i style="padding-right:20px" /> 
   	</f:facet>
	
	<b:column>
	<b:well>
	  <b:panelGrid columns="2" >
	     <b:inputText value="#{lotsMB.nomCompletfourn}" label="Fournisseur" disabled="true" colMd="8" labelColMd="4"/> 
			  
			 <b:inputText value="#{lotsMB.transporteur}" name="transporteur" label="Transporteur"  colMd="8" labelColMd="4"/> 
			  <b:inputText value="#{lotsMB.noplaque}" name="noPlaque" label="No Plaque"  mask="AA-99999"  colMd="8" labelColMd="4" /> 
			  
			   <b:selectOneMenu value="#{lotsMB.idregion}" label="ID Region"  colMd="8" labelColMd="4" >
			    <f:selectItems var="item" value="#{lotsMB.listreg()}" itemLabel="#{item.regionId} (#{item.zone_id})" itemValue="#{item.regionId}"/>
			    </b:selectOneMenu>  
    		<b:datepicker value="#{lotsMB.date_transport}" name="datetransp" label="Date Transport" format="DD.MM.YYYY"   colMd="8" labelColMd="4" />
        	<b:datepicker value="#{lotsMB.date_livraison}" name="dateLivraison" label="Date Livraison" format="DD.MM.YYYY"   colMd="8" labelColMd="4"  />  
		 </b:panelGrid >
		 
		</b:well>
		</b:column>
	   <b:buttonGroup>
	      <b:commandButton  update="info,info2,info3,info4"  value="Precedent" look="primary" rendered="#{lotsMB.renderlot}"  >
		<f:ajax execute="@form" listener="#{lotsMB.backToInfoLot()}" ></f:ajax>
		<b:iconAwesome  name="fa-arrow-circle-left" size="lg" /> 
		      </b:commandButton>
	    <b:commandButton  icon="trash" value="Vider" look="primary"  update="info,info2,info3,info4">
	   <f:ajax execute="@form" listener="#{lotsMB.ClearInfotLot()}"  ></f:ajax>
	   </b:commandButton>
	   
	    <b:commandButton  look="primary" value="Suivant" update="info,messages,info2,info3,info4"   >
	 <f:ajax execute="@form" listener="#{lotsMB.verificationlots()}"  ></f:ajax>
          <b:iconAwesome  name="fa-arrow-circle-right" size="lg" /> 
	     </b:commandButton>               

	     </b:buttonGroup>
	   </b:panel>

</b:form>


<b:form inline="true" id="info3">
<b:panel style="width:50%;margin:auto" rendered="#{lotsMB.renderachat}">
		<f:facet name="heading">
   	</f:facet>
 	     
   	     <b:column>
 
  	     <img alt="hola" src="../images/catalogue_achats_responsable.jpg" height="50" width="50"/>		  
			     
	     <b:selectOneMenu value="#{lotsMB.noachat}"   colMd="4" labelColMd="2" >
			   
			    <f:selectItems var="item" value="#{lotsMB.listerCodeAchat()}" itemLabel="#{item.key}"  itemValue="#{item.key}"/>
			     <f:facet name="append">
           		 <b:commandButton disabled="#{lotsMB.disableButton}" update="info,messages,info2,info3,info4" look="primary" iconAwesome="add" icon-align="right" > 
           		 <b:badge style="margin-left:10px; background-color:#5cb85c" value="#{lotsMB.listerCodeAchat().size()}" rendered="#{lotsMB.renderachat}"/>
     	 <f:ajax execute="@form" listener="#{lotsMB.rechercherAchat()}"  ></f:ajax>      
                 </b:commandButton>
       			 </f:facet>       	
       			</b:selectOneMenu> 
			    
  			  
  			  
  			    <b:column>
  			    <b:well rendered="#{lotsMB.renderetailsachat}">
	     <b:panelGrid columns="2"  >
			 <b:inputText value="#{lotsMB.qttrecu}" mask="integer" label="Quantité  recu" disabled="true"  colMd="8" labelColMd="4"/> 
    		<b:inputText value="#{lotsMB.qttapc}"  mask="integer" label="Quantité APC"  required="true"  colMd="8" labelColMd="4"/>   		
		
	
		  </b:panelGrid >
		  	  	 <b:commandButton offset="2" look="primary" value="Ajouter" update="info,messages,info2,info3,info4" icon="add"   colMd="8" style="margin-bottpm:25px"  >
		 <f:ajax execute="@form" listener="#{lotsMB.AjouterAchats()}"  ></f:ajax>
		</b:commandButton>
		  </b:well>
	
		  </b:column>
	

  			  </b:column>
			</b:panel>
</b:form>


<b:form horizontal="true" id="info4">
<b:panel style="margin-left:50px;margin-right:50px;" rendered="#{lotsMB.renderachat}">
	
	<f:facet name="heading">
     <i style="padding-right:20px" />
      <b:badge style="background-color:#5cb85c" value="#{lotsMB.lister().size()}" rendered="#{lotsMB.renderachat}"/>
    <img alt="hola" src="../images/catalogue_achats_responsable.jpg" height="30" width="40"/>
   	</f:facet>

	
   	     <b:panelGrid columns="1" rendered="#{lotsMB.renderachat}" style="padding-top:5px">
	     <b:column style="margin-top:50px;">
	     <b:dataTable   value="#{lotsMB.lister()}"  var="item" >
		
         <b:dataTableColumn value="#{item.value.achats.achatId}" label="No Achat"/>
         <b:dataTableColumn value="#{item.value.lotqttrecu}" label="Quantité recu"/>
         <b:dataTableColumn value="#{item.value.lotqttapc}" label="Quantité APC"/>
         <b:dataTableColumn label="Action">
         <b:commandButton  update="info,info2,info3,info4" icon-awesome="fa-edit" look="primary" size="sm" style="margin-left:5px" tooltip="Editer" >
                <f:param name="cle" value="#{item.key}"></f:param>
           <f:ajax execute="@form" listener="#{lotsMB.editerligen()}"></f:ajax>
         </b:commandButton>
         <b:commandButton update="info,info2,info3,info4" action="#{lotsMB.deleteligne()}" icon-awesome=" fa-trash" look="primary" size="sm" style="margin-left:5px" tooltip="Effacer">
         <f:param name="cle" value="#{item.key}"></f:param>
         <f:ajax execute="@form" listener="#{lotsMB.deleteligne()}"></f:ajax>
         </b:commandButton>
         </b:dataTableColumn>
         </b:dataTable> 
	     </b:column>
	     </b:panelGrid>
	  </b:panel>
	  
	  <b:panel style="width:50%;margin:auto" rendered="#{lotsMB.renderachat}">
	  <!-- rendered="#{lotsMB.renderachat}" -->
	       <b:column>
	       <b:well>
	      <b:panelGrid columns="2" >
	      <b:inputText value="#{lotsMB.qttTotrecu}" label="Quantité Total recu" disabled="true" colMd="8" labelColMd="4" /> 
	      <b:inputText value="#{lotsMB.qttTotapc}" label="Quantité  Total APC" disabled="true" colMd="8" labelColMd="4" /> 
	     </b:panelGrid></b:well>
	     </b:column>
	     
	     <b:buttonGroup>
	          <b:commandButton look="primary" update="info,info2,info3,info4"  value="Precedent" >
		<f:ajax execute="@form" listener="#{lotsMB.backToInfoAchat()}" ></f:ajax>
		<b:iconAwesome  name="fa-arrow-circle-left" size="lg" /> 
		      </b:commandButton>
	    
	        
	      <b:commandButton value="Vider" icon="trash" look="primary" update="info,messages,info2,info3,info4"  disabled="#{lotsMB.disablefield}" >
	      <f:ajax execute="@form" listener="#{lotsMB.ClearInfoAchat()}"></f:ajax>
	      </b:commandButton>
	      
	  	  <b:commandButton value="Enregistrer" icon="save" update="info,messages,info2,info3,info4" look="primary"   disabled="#{lotsMB.disablefield}">
	  	  <f:ajax execute="@form" listener="#{lotsMB.enregistrerlot()}"></f:ajax>
	  	  </b:commandButton>
	 </b:buttonGroup>
	  
	  </b:panel>
	  </b:form>


</h:body>
	    

	</ui:define>
	</ui:composition>
	